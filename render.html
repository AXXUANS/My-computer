<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>render函数</title>
    <script src="https://cdn.bootcss.com/vue/2.3.4/vue.js"></script>
</head>
<body>
<div id="app">
    <smart-item :data="data"></smart-item>
    <button @click="change('img')">切换为图片为组件</button>
    <button @click="change('video')">切换为视频为组件</button>
    <button @click="change('text')">切换为文本组件</button>
    <div class="wapper">
        <div class="logo">
            <a href="/" theme-config="" data-type="image" data-code="Plogo1" class="logo-dark" style="background-image: url(&quot;images/logo.png&quot;);"></a>
            <a href="/" theme-config="" data-type="image" data-code="Plogo2" class="logo-light" style="background-image: url(&quot;images/logo.png&quot;);"></a>
        </div>
        <div class="floating-nav"><button><i class="material-icons"></i></button> <div class="lining"><div class="close-area"></div> <ul class="floating-nav-primary-list"><li class="floating-nav-primary-item group"><a href="javascript://">新闻资讯</a> <div class="floating-nav-secondary"><div class="floating-nav-secondary-head"><span class="btn-back"><i class="material-icons"></i></span> <span class="name">新闻资讯</span></div> <ul class="floating-nav-secondary-list"><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/5bcf9d6c-eadc-46ea-b390-b04bd257cc32/Page/1">最新动态</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/8d72c01b-8475-4acd-8dde-92b879b30d2c/Page/1">最新公告</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/e2da8c4f-6d95-427a-beec-128e9f1a041d/Page/1">专题活动</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/Detail/Column/cdc60fdc-d8c7-4009-a0f2-819f5c4c79df/Page/1/Item/afab22c4-1976-4019-b2a7-caa8bad7ef69">本馆讲座</a> <ul class="floating-nav-thirdary-list"></ul></li></ul></div></li><li class="floating-nav-primary-item group"><a href="javascript://">数字资源</a> <div class="floating-nav-secondary"><div class="floating-nav-secondary-head"><span class="btn-back"><i class="material-icons"></i></span> <span class="name">数字资源</span></div> <ul class="floating-nav-secondary-list"><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Resource/Type/List/Column/c6229fb7-196b-483d-add2-2a2dee047be8/Page/1">数字资源</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Resource/Type/List/Column/be4bda29-6b96-4b3a-b66f-ccd744fdab92/Page/1">自建资源</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Resource/Type/List/Column/fc51c4ac-5dcb-4973-a0a8-7064b0aabe59/Page/1">共享工程</a> <ul class="floating-nav-thirdary-list"></ul></li></ul></div></li><li class="floating-nav-primary-item group"><a href="javascript://">读者服务</a> <div class="floating-nav-secondary"><div class="floating-nav-secondary-head"><span class="btn-back"><i class="material-icons"></i></span> <span class="name">读者服务</span></div> <ul class="floating-nav-secondary-list"><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/d477a00d-e538-4e03-a8a1-942f376e1308/Page/1">读者须知</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/d0d06072-1dcb-4c48-a071-3a9b40aa54c0/Page/1">借阅指南</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/b0b23cf9-1225-4a80-bffb-3aa92d28c0a2/Page/1">办证须知</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/5ac08048-3950-438a-922c-49d9c7c45c13/Page/1">馆藏布局</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Question/Type/List/Column/93485302-75b4-45c8-8a31-70508070f182/Page/1">常见问题</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Message/Type/List/Column/ddfc3196-1820-480f-8905-e1e4f3dfb18b/Page/1">读者留言</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="mailto:kef@shangyekj.com">咨询信箱</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Survey/Type/List/Column/c7a0efae-d52d-4fb7-83ea-05908b379265/Page/1">读者调查</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Donation/Type/List/Column/168ca623-64ad-487a-a9e9-47717e57b2ef/Page/1">捐赠鸣谢</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/NewBook/Type/List/Column/6c3a7996-a99f-415b-9257-6ff66c0efc3a/Page/1">新书推荐</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Recommendation/Type/List/Column/bd6f242c-8db2-4d5a-b1eb-77dc7b33c3b3/Page/1">读者荐书</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Download/Type/List/Column/5bc186ec-b8dc-4231-8eca-b9f83b8654f2/Page/1">软件下载</a> <ul class="floating-nav-thirdary-list"></ul></li></ul></div></li><li class="floating-nav-primary-item group"><a href="javascript://">本馆概况</a> <div class="floating-nav-secondary"><div class="floating-nav-secondary-head"><span class="btn-back"><i class="material-icons"></i></span> <span class="name">本馆概况</span></div> <ul class="floating-nav-secondary-list"><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/Detail/Column/30662396-bd03-453e-8b17-5b09ded9d238/Page/1/Item/6501e962-54b4-4fd7-be76-b1c01c8d9799">本馆简介</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/Detail/Column/c9c9e74b-4d9d-4441-ad4e-ef1f374996c7/Page/1/Item/3befcaa3-2593-4e8f-93ee-c31970a2fd89">开放时间</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/1fd82f7a-e51a-4040-a11b-16974bae2a82/Page/1">组织结构</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/78ef4d4b-3491-40ae-88f8-5fd3af209174/Page/1">馆员风采</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/42942e7e-a0bc-4cbc-a611-8df1dbc0afb3/Page/1">馆舍风貌</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/Detail/Column/e405f1f1-d0d1-4a95-a1ca-ee9e9614966b/Page/1/Item/0eea418b-649d-4a9e-a80a-a940eac2cf22">联系方式</a> <ul class="floating-nav-thirdary-list"></ul></li><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/Detail/Column/ddc5db93-74f2-46af-a842-d416ab6531f8/Page/1/Item/08802fb4-89bd-48a4-b87a-d5482cacbb70">交通指南</a> <ul class="floating-nav-thirdary-list"></ul></li></ul></div></li><li class="floating-nav-primary-item group"><a href="javascript://">网上展览</a> <div class="floating-nav-secondary"><div class="floating-nav-secondary-head"><span class="btn-back"><i class="material-icons"></i></span> <span class="name">网上展览</span></div> <ul class="floating-nav-secondary-list"><li class="floating-nav-secondary-item"><a href="Sub.html#!Function/Article/Type/List/Column/41af4cb2-2310-4b0c-9973-51c45052e2b6/Page/1">网上展览</a> <ul class="floating-nav-thirdary-list"></ul></li></ul></div></li></ul></div></div>
        <div class="primary-nav"><ul class="primary-list swiper-no-swiping"><li class="primary-item active"><a target="_self" href="Index.html">首页</a></li><li class="primary-item"><a target="_self" href="Sub.html#!Function/Article/Type/List/Column/5bcf9d6c-eadc-46ea-b390-b04bd257cc32/Page/1">新闻资讯</a></li><li class="primary-item"><a target="_self" href="Sub.html#!Function/Resource/Type/List/Column/c6229fb7-196b-483d-add2-2a2dee047be8/Page/1">数字资源</a></li><li class="primary-item"><a target="_self" href="Sub.html#!Function/Article/Type/List/Column/d477a00d-e538-4e03-a8a1-942f376e1308/Page/1">读者服务</a></li><li class="primary-item"><a target="_self" href="Sub.html#!Function/Article/Type/Detail/Column/30662396-bd03-453e-8b17-5b09ded9d238/Page/1/Item/6501e962-54b4-4fd7-be76-b1c01c8d9799">本馆概况</a></li></ul></div>
    </div>
</div>
<script>
    // 图片组件选项
    var ImgItem = {
        props: ['data'],
        render: function(createElement) {
            return createElement('div', [
                createElement('p', '图片组件'),
                createElement('img', {
                    attrs: {
                        src: this.data.url
                    }
                })
            ]);
        }
    }
    // 视频组件
    var VideoItem = {
        props: ['data'],
        render: function(createElement) {
            return createElement('div', [
                createElement('p', '视频组件'),
                createElement('video', {
                    attrs: {
                        src: this.data.url,
                        controls: 'controls',
                        autoplay: 'autoplay'
                    }
                })
            ]);
        }
    };
    /*纯文本组件*/
    var TextItem = {
        props: ['data'],
        render: function(createElement) {
            return createElement('div', [
                createElement('p', '纯文本组件'),
                createElement('p', this.data.text)
            ]);
        }
    };

    Vue.component('smart-item', {
        functional: true,
        render: function(createElement, context) {
            function getComponent() {
                var data = context.props.data;
                if (data.type === 'img') return ImgItem;
                if (data.type === 'video') return VideoItem;
                return TextItem;
            }
            return createElement(
                getComponent(),
                {
                    props: {
                        data: context.props.data
                    }
                },
                context.children
            )
        },
        props: {
            data: {
                type: Object,
                required: true
            }
        }
    });
    new Vue({
        el: '#app',
        data() {
            return {
                data: {}
            }
        },
        methods: {
            change: function(type) {
                if (type === 'img') {
                    this.data = {
                        type: 'img',
                        url: 'https://raw.githubusercontent.com/iview/iview/master/assets/logo.png'
                    }
                } else if (type === 'video') {
                    this.data = {
                        type: 'video',
                        url: 'http://vjs.zencdn.net/v/oceans.mp4'
                    }
                } else if (type === 'text') {
                    this.data = {
                        type: 'text',
                        content: '这是一段纯文本'
                    }
                }
            }
        },
        created: function() {
            this.change('img');
        }
    });
</script>
</body>
</html>